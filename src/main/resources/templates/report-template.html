<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <title>Relatório de Análise de Risco</title>
    <!-- CSS é 'inline' ou no <head> para o Flying Saucer funcionar -->
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            font-size: 11pt;
        }
        .container {
            width: 90%;
            margin: 0 auto;
        }
        .header {
            border-bottom: 2px solid #000;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .header h1 {
            margin: 0;
            padding: 0;
            font-size: 24pt;
        }
        .logo-placeholder {
            float: right;
            font-size: 14pt;
            font-weight: bold;
            color: #888;
            border: 2px dashed #ccc;
            padding: 10px;
        }
        .project-info {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .project-info p {
            margin: 5px 0;
        }
        .annotation-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .annotation-table th,
        .annotation-table td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
            vertical-align: top;
        }
        .annotation-table th {
            background-color: #333;
            color: #fff;
        }
        .risk-HIGH { color: #D9534F; font-weight: bold; }
        .risk-MEDIUM { color: #F0AD4E; font-weight: bold; }
        .risk-LOW { color: #5CB85C; font-weight: bold; }

        .footer {
            margin-top: 30px;
            text-align: center;
            font-size: 9pt;
            color: #777;
            border-top: 1px solid #eee;
            padding-top: 10px;
        }
    </style>
</head>
<body>

<div class="container">

    <div class="header">
        <div class="logo-placeholder">
            [ LOGO IA-GOV SUITE ]
        </div>
        <h1>Relatório de Análise de Risco</h1>
    </div>

    <div class="project-info">
        <p><strong>Projeto:</strong> <span th:text="${project.title}">Nome do Projeto</span></p>
        <p><strong>Cliente:</strong> <span th:text="${project.clientName}">Nome do Cliente</span></p>
        <p><strong>Advogado(a) Responsável:</strong> <span th:text="${project.user.firstName + ' ' + project.user.lastName}">Nome do Advogado</span></p>
        <p><strong>Documento Analisado:</strong> <span th:text="${project.documentFile?.originalFilename ?: 'N/A'}">contrato.pdf</span></p>
        <p><strong>Data de Geração:</strong> <span th:text="${generationDate}">17 de Novembro de 2025</span></p>
    </div>

    <h2>Sumário de Anotações</h2>

    <table class="annotation-table">
        <thead>
        <tr>
            <th style="width: 10%;">Risco</th>
            <th style="width: 35%;">Trecho Selecionado / Cláusula</th>
            <th style="width: 55%;">Recomendação Jurídica</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="ann : ${project.annotations}">
            <td>
                <span th:classappend="'risk-' + ${ann.riskLevel}" th:text="${ann.riskLevel}">ALTO</span>
            </td>
            <td th:text="${ann.selectedText ?: 'Anotação geral'}">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit...
            </td>
            <td th:text="${ann.recommendation}">
                Recomenda-se a revisão completa desta cláusula...
            </td>
        </tr>
        <!-- Caso não haja anotações -->
        <tr th:if="${#lists.isEmpty(project.annotations)}">
            <td colspan="3" style="text-align: center;">Nenhuma anotação registrada para este projeto.</td>
        </tr>
        </tbody>
    </table>

    <div class="footer">
        Relatório gerado pela plataforma IA-Gov Suite | &copy; 2025
    </div>

</div>

</body>
</html>